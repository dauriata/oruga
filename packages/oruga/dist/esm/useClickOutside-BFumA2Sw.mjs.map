{"version":3,"file":"useClickOutside-BFumA2Sw.mjs","sources":["../../src/composables/useClickOutside.ts"],"sourcesContent":["import { type MaybeRefOrGetter } from \"vue\";\r\nimport { useEventListener } from \"./useEventListener\";\r\nimport { unrefElement } from \"./unrefElement\";\r\n\r\n/**\r\n * Listen for clicks outside of an element.\r\n * Adaption of {@link https://vueuse.org/core/onClickOutside}\r\n *\r\n * @param target Target element\r\n * @param handler Event handler\r\n * @param ignore Element to ignore\r\n * @return stop function\r\n */\r\nexport function useClickOutside(\r\n    target: MaybeRefOrGetter,\r\n    handler: (evt: PointerEvent) => void,\r\n    ignore: (MaybeRefOrGetter | string)[] = [],\r\n): () => void {\r\n    if (!window) return;\r\n\r\n    /**\r\n     * White-listed items that not emit event when clicked.\r\n     * All children from ignore prop.\r\n     */\r\n    const shouldIgnore = (event: PointerEvent): boolean => {\r\n        return ignore.some((target) => {\r\n            if (typeof target === \"string\") {\r\n                return Array.from(\r\n                    window.document.querySelectorAll(target),\r\n                ).some(\r\n                    (el) =>\r\n                        el === event.target ||\r\n                        event.composedPath().includes(el),\r\n                );\r\n            } else {\r\n                const el = unrefElement(target);\r\n                return (\r\n                    el &&\r\n                    (event.target === el || event.composedPath().includes(el))\r\n                );\r\n            }\r\n        });\r\n    };\r\n\r\n    const listener = (event: PointerEvent): void => {\r\n        const el = unrefElement(target);\r\n        if (!el || el === event.target || event.composedPath().includes(el))\r\n            return;\r\n        if (shouldIgnore(event)) return;\r\n        handler(event);\r\n    };\r\n\r\n    const stop = useEventListener(\"click\", listener, window, {\r\n        immediate: true,\r\n        passive: true,\r\n    });\r\n\r\n    return stop;\r\n}\r\n"],"names":["target"],"mappings":";;;;AAaO,SAAS,gBACZ,QACA,SACA,SAAwC,CAAA,GAC9B;AACV,MAAI,CAAC;AAAQ;AAMP,QAAA,eAAe,CAAC,UAAiC;AAC5C,WAAA,OAAO,KAAK,CAACA,YAAW;AACvB,UAAA,OAAOA,YAAW,UAAU;AAC5B,eAAO,MAAM;AAAA,UACT,OAAO,SAAS,iBAAiBA,OAAM;AAAA,QAAA,EACzC;AAAA,UACE,CAAC,OACG,OAAO,MAAM,UACb,MAAM,aAAA,EAAe,SAAS,EAAE;AAAA,QAAA;AAAA,MACxC,OACG;AACG,cAAA,KAAK,aAAaA,OAAM;AAE1B,eAAA,OACC,MAAM,WAAW,MAAM,MAAM,eAAe,SAAS,EAAE;AAAA,MAEhE;AAAA,IAAA,CACH;AAAA,EAAA;AAGC,QAAA,WAAW,CAAC,UAA8B;AACtC,UAAA,KAAK,aAAa,MAAM;AAC1B,QAAA,CAAC,MAAM,OAAO,MAAM,UAAU,MAAM,aAAA,EAAe,SAAS,EAAE;AAC9D;AACJ,QAAI,aAAa,KAAK;AAAG;AACzB,YAAQ,KAAK;AAAA,EAAA;AAGjB,QAAM,OAAO,iBAAiB,SAAS,UAAU,QAAQ;AAAA,IACrD,WAAW;AAAA,IACX,SAAS;AAAA,EAAA,CACZ;AAEM,SAAA;AACX;"}