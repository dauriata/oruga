{"version":3,"file":"useMatchMedia-gcwLqHTY.cjs","sources":["../../src/composables/useMatchMedia.ts"],"sourcesContent":["import { getCurrentInstance, ref } from \"vue\";\r\nimport { getOption } from \"@/utils/config\";\r\nimport { useEventListener } from \"./useEventListener\";\r\nimport { isClient } from \"@/utils/ssr\";\r\n\r\n/**\r\n * Checks if the match media is mobile.\r\n * @param mobileBreakpoint px breakpoint\r\n */\r\nexport function useMatchMedia(mobileBreakpoint?: string) {\r\n    const isMobile = ref(false);\r\n    const mediaQuery = ref();\r\n\r\n    // getting a hold of the internal instance in setup()\r\n    const vm = getCurrentInstance();\r\n    if (!vm)\r\n        throw new Error(\r\n            \"useMatchMedia must be called within a component setup function.\",\r\n        );\r\n    // get component props\r\n    const props = vm.props;\r\n\r\n    const configField = vm.proxy?.$options.configField;\r\n    if (!configField)\r\n        throw new Error(\"component must define the 'configField' option.\");\r\n\r\n    // get mobileBreakpoint width value\r\n    let width = props.mobileBreakpoint;\r\n    if (!width) {\r\n        const defaultWidth = getOption(\r\n            `mobileBreakpoint`,\r\n            mobileBreakpoint || \"1023px\",\r\n        );\r\n\r\n        width = getOption(`${configField}.mobileBreakpoint`, defaultWidth);\r\n    }\r\n\r\n    // define match media query ref\r\n    mediaQuery.value = isClient\r\n        ? window.matchMedia(`(max-width: ${width})`)\r\n        : undefined;\r\n\r\n    if (mediaQuery.value) {\r\n        isMobile.value = mediaQuery.value.matches;\r\n        useEventListener(\"change\", onMatchMedia, mediaQuery.value);\r\n    } else {\r\n        isMobile.value = false;\r\n    }\r\n\r\n    function onMatchMedia(event: any): void {\r\n        isMobile.value = event.matches;\r\n    }\r\n\r\n    return { isMobile };\r\n}\r\n"],"names":["ref","getCurrentInstance","getOption","isClient","useEventListener"],"mappings":";;;;;;AASO,SAAS,cAAc,kBAA2B;;AAC/C,QAAA,WAAWA,QAAI,KAAK;AAC1B,QAAM,aAAaA,IAAAA;AAGnB,QAAM,KAAKC,IAAAA;AACX,MAAI,CAAC;AACD,UAAM,IAAI;AAAA,MACN;AAAA,IAAA;AAGR,QAAM,QAAQ,GAAG;AAEX,QAAA,eAAc,QAAG,UAAH,mBAAU,SAAS;AACvC,MAAI,CAAC;AACK,UAAA,IAAI,MAAM,iDAAiD;AAGrE,MAAI,QAAQ,MAAM;AAClB,MAAI,CAAC,OAAO;AACR,UAAM,eAAeC,OAAA;AAAA,MACjB;AAAA,MACA,oBAAoB;AAAA,IAAA;AAGxB,YAAQA,OAAU,UAAA,GAAG,WAAW,qBAAqB,YAAY;AAAA,EACrE;AAGA,aAAW,QAAQC,eACb,OAAO,WAAW,eAAe,KAAK,GAAG,IACzC;AAEN,MAAI,WAAW,OAAO;AACT,aAAA,QAAQ,WAAW,MAAM;AACjBC,qBAAAA,iBAAA,UAAU,cAAc,WAAW,KAAK;AAAA,EAAA,OACtD;AACH,aAAS,QAAQ;AAAA,EACrB;AAEA,WAAS,aAAa,OAAkB;AACpC,aAAS,QAAQ,MAAM;AAAA,EAC3B;AAEA,SAAO,EAAE,SAAS;AACtB;;"}