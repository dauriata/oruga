{"version":3,"file":"Datepicker.vue_vue_type_script_setup_true_lang-BV46XGIX.cjs","sources":["../../src/components/datepicker/useDatepickerMixins.ts","../../src/components/datepicker/DatepickerTableRow.vue","../../src/components/datepicker/DatepickerTable.vue","../../src/components/datepicker/DatepickerMonth.vue","../../src/components/datepicker/Datepicker.vue"],"sourcesContent":["import { computed } from \"vue\";\r\nimport { matchWithGroups } from \"./utils\";\r\nimport type { DatepickerProps } from \"./types\";\r\n\r\nexport function useDatepickerMixins(props: DatepickerProps) {\r\n    /**\r\n     * Check that selected date is within earliest/latest params and\r\n     * is within a given month\r\n     */\r\n    function isDateSelectable(date: Date, month: number): boolean {\r\n        const validity = [];\r\n\r\n        if (props.minDate) validity.push(date >= props.minDate);\r\n        if (props.maxDate) validity.push(date <= props.maxDate);\r\n\r\n        if (props.nearbyMonthDays && !props.nearbySelectableMonthDays)\r\n            validity.push(date.getMonth() === month);\r\n\r\n        if (props.selectableDates) {\r\n            if (typeof props.selectableDates === \"function\") {\r\n                if (props.selectableDates(date)) return true;\r\n                else validity.push(false);\r\n            } else {\r\n                for (let i = 0; i < props.selectableDates.length; i++) {\r\n                    const enabledDate = props.selectableDates[i];\r\n                    if (\r\n                        date.getDate() === enabledDate.getDate() &&\r\n                        date.getFullYear() === enabledDate.getFullYear() &&\r\n                        date.getMonth() === enabledDate.getMonth()\r\n                    )\r\n                        return true;\r\n                    else validity.push(false);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (props.unselectableDates) {\r\n            if (typeof props.unselectableDates === \"function\") {\r\n                validity.push(!props.unselectableDates(date));\r\n            } else {\r\n                for (let i = 0; i < props.unselectableDates.length; i++) {\r\n                    const disabledDate = props.unselectableDates[i];\r\n                    validity.push(\r\n                        date.getDate() !== disabledDate.getDate() ||\r\n                            date.getFullYear() !== disabledDate.getFullYear() ||\r\n                            date.getMonth() !== disabledDate.getMonth(),\r\n                    );\r\n                }\r\n            }\r\n        }\r\n\r\n        if (props.unselectableDaysOfWeek) {\r\n            for (let i = 0; i < props.unselectableDaysOfWeek.length; i++) {\r\n                const dayOfWeek = props.unselectableDaysOfWeek[i];\r\n                validity.push(date.getDay() !== dayOfWeek);\r\n            }\r\n        }\r\n\r\n        return validity.indexOf(false) < 0;\r\n    }\r\n\r\n    const isTypeMonth = computed(() => props.type === \"month\");\r\n\r\n    const localeOptions = computed(\r\n        () =>\r\n            new Intl.DateTimeFormat(props.locale, {\r\n                year: \"numeric\",\r\n                month: \"numeric\",\r\n            }).resolvedOptions() as Intl.DateTimeFormatOptions,\r\n    );\r\n\r\n    /** DateTime Format */\r\n    const dtf = computed(\r\n        () => new Intl.DateTimeFormat(props.locale /*, { timeZone: 'UTC' }*/),\r\n    );\r\n\r\n    /** DateTime Month Format */\r\n    const dtfMonth = computed(\r\n        () =>\r\n            new Intl.DateTimeFormat(props.locale, {\r\n                year: localeOptions.value.year || \"numeric\",\r\n                month: localeOptions.value.month || \"2-digit\",\r\n                // timeZone: 'UTC'\r\n            }),\r\n    );\r\n\r\n    const sampleTime = computed(() => {\r\n        const d = props.dateCreator();\r\n        d.setHours(10);\r\n        d.setSeconds(0);\r\n        d.setMinutes(0);\r\n        d.setMilliseconds(0);\r\n        return d;\r\n    });\r\n\r\n    /** Format date into string */\r\n    const defaultDateFormatter = (date: Date | Date[]): string => {\r\n        if (!date) return \"\";\r\n        const targetDates = Array.isArray(date) ? date : [date];\r\n        const dates = targetDates.map((date) => {\r\n            const d = new Date(\r\n                date.getFullYear(),\r\n                date.getMonth(),\r\n                date.getDate(),\r\n                12,\r\n            );\r\n            return !isTypeMonth.value\r\n                ? dtf.value.format(d)\r\n                : dtfMonth.value.format(d);\r\n        });\r\n        return !props.multiple ? dates.join(\" - \") : dates.join(\", \");\r\n    };\r\n\r\n    /** Parse a string into a date */\r\n    const defaultDateParser = (date: string): Date => {\r\n        if (!date) return null;\r\n        if (\r\n            dtf.value.formatToParts &&\r\n            typeof dtf.value.formatToParts === \"function\"\r\n        ) {\r\n            const formatRegex = (isTypeMonth.value ? dtfMonth.value : dtf.value)\r\n                .formatToParts(sampleTime.value)\r\n                .map((part) => {\r\n                    if (part.type === \"literal\") return part.value;\r\n                    return `((?!=<${part.type}>)\\\\d+)`;\r\n                })\r\n                .join(\"\");\r\n            const dateGroups = matchWithGroups(formatRegex, date);\r\n\r\n            // We do a simple validation for the group.\r\n            // If it is not valid, it will fallback to Date.parse below\r\n            if (\r\n                dateGroups.year &&\r\n                dateGroups.year.length === 4 &&\r\n                dateGroups.month &&\r\n                dateGroups.month <= 12\r\n            ) {\r\n                if (isTypeMonth.value)\r\n                    return new Date(dateGroups.year, dateGroups.month - 1);\r\n                else if (dateGroups.day && dateGroups.day <= 31) {\r\n                    return new Date(\r\n                        dateGroups.year,\r\n                        dateGroups.month - 1,\r\n                        dateGroups.day,\r\n                        12,\r\n                    );\r\n                }\r\n            }\r\n        }\r\n        // Fallback if formatToParts is not supported or if we were not able to parse a valid date\r\n        if (!isTypeMonth.value) return new Date(Date.parse(date));\r\n        const s = date.split(\"/\");\r\n        const year = s[0].length === 4 ? s[0] : s[1];\r\n        const month = s[0].length === 2 ? s[0] : s[1];\r\n        if (year && month) {\r\n            return new Date(\r\n                parseInt(year, 10),\r\n                parseInt(month, 10) - 1,\r\n                1,\r\n                0,\r\n                0,\r\n                0,\r\n                0,\r\n            );\r\n        }\r\n    };\r\n\r\n    return { isDateSelectable, defaultDateParser, defaultDateFormatter };\r\n}\r\n","<script setup lang=\"ts\">\r\nimport {\r\n    computed,\r\n    watch,\r\n    nextTick,\r\n    ref,\r\n    type PropType,\r\n    type ComponentPublicInstance,\r\n} from \"vue\";\r\n\r\nimport { defineClasses } from \"@/composables\";\r\n\r\nimport { useDatepickerMixins } from \"./useDatepickerMixins\";\r\nimport { weeksInYear, firstWeekOffset } from \"./utils\";\r\nimport type { DatepickerProps, DatepickerEvent } from \"./types\";\r\nimport type { ClassBind } from \"@/types\";\r\n\r\ndefineOptions({\r\n    name: \"ODatepickerTableRow\",\r\n    configField: \"datepicker\",\r\n});\r\n\r\nconst props = defineProps({\r\n    day: { type: Number, required: true },\r\n    week: { type: Array as PropType<Date[]>, required: true },\r\n    month: { type: Number, required: true },\r\n    selectedDate: {\r\n        type: [Date, Array] as PropType<Date | Date[]>,\r\n        default: undefined,\r\n    },\r\n    events: { type: Array as PropType<DatepickerEvent[]>, default: undefined },\r\n    hoveredDateRange: { type: Array as PropType<Date[]>, default: () => [] },\r\n    pickerProps: {\r\n        type: Object as PropType<DatepickerProps>,\r\n        required: true,\r\n    },\r\n});\r\n\r\nconst emits = defineEmits<{\r\n    (e: \"select\", value: Date): void;\r\n    (e: \"hover-enddate\", value: Date): void;\r\n    (e: \"change-focus\", value: Date): void;\r\n    (e: \"week-number-click\", value: number): void;\r\n}>();\r\n\r\nconst { isDateSelectable } = useDatepickerMixins(props.pickerProps);\r\n\r\nconst datepicker = computed<DatepickerProps>(() => props.pickerProps);\r\n\r\nconst hasEvents = computed(() => !!props.events?.length);\r\n\r\nconst dayRefs = ref(new Map());\r\n\r\nfunction setDayRef(date: Date, el: Element | ComponentPublicInstance): void {\r\n    const refKey = `day-${date.getMonth()}-${date.getDate()}`;\r\n    if (el) dayRefs.value.set(refKey, el);\r\n}\r\n\r\nwatch(\r\n    () => props.day,\r\n    (day) => {\r\n        // if day is in week\r\n        if (props.week.map((d) => d.getDate()).includes(day))\r\n            nextTick(() => {\r\n                // $nextTick is needed when month is changed\r\n                const refKey = `day-${props.month}-${day}`;\r\n                const ref = dayRefs.value.get(refKey);\r\n                if (ref) ref.focus();\r\n            });\r\n    },\r\n);\r\n\r\nwatch(\r\n    () => props.month,\r\n    // clear day refs on month change\r\n    () => (dayRefs.value = new Map()),\r\n);\r\n\r\nfunction clickWeekNumber(week: number): void {\r\n    if (datepicker.value.weekNumberClickable) emits(\"week-number-click\", week);\r\n}\r\n\r\nfunction getDayOfYear(input): number {\r\n    return (\r\n        Math.round(\r\n            (input.getTime() - new Date(input.getFullYear(), 0, 1).getTime()) /\r\n                864e5,\r\n        ) + 1\r\n    );\r\n}\r\n\r\nfunction getWeekNumber(mom): number {\r\n    const dow = datepicker.value.firstDayOfWeek; // first day of week\r\n    // Rules for the first week : 1 for the 1st January, 4 for the 4th January\r\n    const doy = datepicker.value.rulesForFirstWeek;\r\n    const weekOffset = firstWeekOffset(mom.getFullYear(), dow, doy);\r\n    const week = Math.floor((getDayOfYear(mom) - weekOffset - 1) / 7) + 1;\r\n    let resWeek;\r\n    let resYear;\r\n    if (week < 1) {\r\n        resYear = mom.getFullYear() - 1;\r\n        resWeek = week + weeksInYear(resYear, dow, doy);\r\n    } else if (week > weeksInYear(mom.getFullYear(), dow, doy)) {\r\n        resWeek = week - weeksInYear(mom.getFullYear(), dow, doy);\r\n        resYear = mom.getFullYear() + 1;\r\n    } else {\r\n        resYear = mom.getFullYear();\r\n        resWeek = week;\r\n    }\r\n    return resWeek;\r\n}\r\n\r\nfunction eventsDateMatch(day: Date): DatepickerEvent[] {\r\n    if (!props.events?.length) return [];\r\n    return props.events.filter((event) => event.date.getDay() === day.getDay());\r\n}\r\n\r\n// --- Event Handlers ---\r\n\r\nfunction onKeydown(event: KeyboardEvent, weekDay: Date): void {\r\n    let preventDefault = true;\r\n    switch (event.key) {\r\n        case \"Tab\": {\r\n            preventDefault = false;\r\n            break;\r\n        }\r\n        case \" \":\r\n        case \"Space\":\r\n        case \"Spacebar\":\r\n        case \"Enter\": {\r\n            selectDate(weekDay);\r\n            break;\r\n        }\r\n\r\n        case \"ArrowLeft\":\r\n        case \"Left\": {\r\n            changeFocus(weekDay, -1);\r\n            break;\r\n        }\r\n        case \"ArrowRight\":\r\n        case \"Right\": {\r\n            changeFocus(weekDay, 1);\r\n            break;\r\n        }\r\n        case \"ArrowUp\":\r\n        case \"Up\": {\r\n            changeFocus(weekDay, -7);\r\n            break;\r\n        }\r\n        case \"ArrowDown\":\r\n        case \"Down\": {\r\n            changeFocus(weekDay, 7);\r\n            break;\r\n        }\r\n    }\r\n    if (preventDefault) event.preventDefault();\r\n}\r\n\r\n/** Emit select event with chosen date as payload */\r\nfunction selectDate(date: Date): void {\r\n    if (datepicker.value.disabled) return;\r\n    if (isDateSelectable(date, props.month)) emits(\"select\", date);\r\n}\r\n\r\nfunction changeFocus(day, inc): void {\r\n    const nextDay = new Date(day.getTime());\r\n    nextDay.setDate(day.getDate() + inc);\r\n    // if next day is out of range or not selectable, move to next selectable date\r\n    while (\r\n        (datepicker.value.minDate && nextDay < datepicker.value.minDate) ||\r\n        (datepicker.value.maxDate && nextDay > datepicker.value.maxDate) ||\r\n        !isDateSelectable(nextDay, nextDay.getMonth())\r\n    ) {\r\n        // revert day selection until selectable day is reached\r\n        nextDay.setDate(nextDay.getDate() - Math.sign(inc));\r\n    }\r\n    setRangeHoverEndDate(nextDay);\r\n    emits(\"change-focus\", nextDay);\r\n}\r\n\r\nfunction setRangeHoverEndDate(day): void {\r\n    if (datepicker.value.range) emits(\"hover-enddate\", day);\r\n}\r\n\r\n// --- Computed Component Classes ---\r\n\r\nfunction dateMatch(\r\n    dateOne: Date,\r\n    dateTwo: Date | Date[],\r\n    multiple = false,\r\n): boolean {\r\n    // if either date is null or undefined, return false\r\n    // if using multiple flag, return false\r\n    if (!dateOne || !dateTwo || multiple) return false;\r\n\r\n    if (Array.isArray(dateTwo)) {\r\n        return dateTwo.some(\r\n            (date) =>\r\n                dateOne.getDate() === date.getDate() &&\r\n                dateOne.getFullYear() === date.getFullYear() &&\r\n                dateOne.getMonth() === date.getMonth(),\r\n        );\r\n    }\r\n    return (\r\n        dateOne.getDate() === dateTwo.getDate() &&\r\n        dateOne.getFullYear() === dateTwo.getFullYear() &&\r\n        dateOne.getMonth() === dateTwo.getMonth()\r\n    );\r\n}\r\n\r\nfunction dateWithin(\r\n    dateOne: Date,\r\n    dates: Date | Date[],\r\n    multiple = false,\r\n): boolean {\r\n    if (!Array.isArray(dates) || multiple) return false;\r\n    return dateOne > dates[0] && dateOne < dates[1];\r\n}\r\n\r\n/** Build cellClasses for cell using validations */\r\nfunction cellClasses(day: Date): ClassBind[] {\r\n    const classes = defineClasses(\r\n        [\r\n            \"tableCellSelectedClass\",\r\n            \"o-dpck__table__cell--selected\",\r\n            null,\r\n            dateMatch(day, props.selectedDate) ||\r\n                dateWithin(day, props.selectedDate, datepicker.value.multiple),\r\n        ],\r\n        [\r\n            \"tableCellFirstSelectedClass\",\r\n            \"o-dpck__table__cell--first-selected\",\r\n            null,\r\n            dateMatch(\r\n                day,\r\n                Array.isArray(props.selectedDate) && props.selectedDate[0],\r\n                datepicker.value.multiple,\r\n            ),\r\n        ],\r\n        [\r\n            \"tableCellWithinSelectedClass\",\r\n            \"o-dpck__table__cell--within-selected\",\r\n            null,\r\n            dateWithin(day, props.selectedDate, datepicker.value.multiple),\r\n        ],\r\n        [\r\n            \"tableCellLastSelectedClass\",\r\n            \"o-dpck__table__cell--last-selected\",\r\n            null,\r\n            dateMatch(\r\n                day,\r\n                Array.isArray(props.selectedDate) && props.selectedDate[1],\r\n                datepicker.value.multiple,\r\n            ),\r\n        ],\r\n        [\r\n            \"tableCellFirstHoveredClass\",\r\n            \"o-dpck__table__cell--first-hovered\",\r\n            null,\r\n            dateMatch(\r\n                day,\r\n                Array.isArray(props.hoveredDateRange) &&\r\n                    props.hoveredDateRange[0],\r\n            ),\r\n        ],\r\n        [\r\n            \"tableCellWithinHoveredClass\",\r\n            \"o-dpck__table__cell--within-hovered\",\r\n            null,\r\n            dateWithin(day, props.hoveredDateRange),\r\n        ],\r\n        [\r\n            \"tableCellLastHoveredClass\",\r\n            \"o-dpck__table__cell--last-hovered\",\r\n            null,\r\n            dateMatch(\r\n                day,\r\n                Array.isArray(props.hoveredDateRange) &&\r\n                    props.hoveredDateRange[1],\r\n            ),\r\n        ],\r\n        [\r\n            \"tableCellTodayClass\",\r\n            \"o-dpck__table__cell--today\",\r\n            null,\r\n            dateMatch(day, datepicker.value.dateCreator()),\r\n        ],\r\n        [\r\n            \"tableCellSelectableClass\",\r\n            \"o-dpck__table__cell--selectable\",\r\n            null,\r\n            isDateSelectable(day, props.month) && !datepicker.value.disabled,\r\n        ],\r\n        [\r\n            \"tableCellUnselectableClass\",\r\n            \"o-dpck__table__cell--unselectable\",\r\n            null,\r\n            !isDateSelectable(day, props.month) || datepicker.value.disabled,\r\n        ],\r\n\r\n        [\r\n            \"tableCellInvisibleClass\",\r\n            \"o-dpck__table__cell--invisible\",\r\n            null,\r\n            !datepicker.value.nearbyMonthDays && day.getMonth() !== props.month,\r\n        ],\r\n\r\n        [\r\n            \"tableCellNearbyClass\",\r\n            \"o-dpck__table__cell--nearby\",\r\n            null,\r\n            datepicker.value.nearbySelectableMonthDays &&\r\n                day.getMonth() !== props.month,\r\n        ],\r\n        [\r\n            \"tableCellTodayClass\",\r\n            \"o-dpck__table__cell--today\",\r\n            null,\r\n            dateMatch(day, datepicker.value.dateCreator()),\r\n        ],\r\n    );\r\n\r\n    return [\r\n        ...tableCellClasses.value,\r\n        ...cellEventsClass.value,\r\n        ...classes.value,\r\n    ];\r\n}\r\n\r\nfunction eventClasses(event: DatepickerEvent): ClassBind[] {\r\n    const classes = defineClasses(\r\n        [\"tableEventClass\", \"o-dpck__table__event\"],\r\n        [\r\n            \"tableEventVariantClass\",\r\n            \"o-dpck__table__event--\",\r\n            event.type,\r\n            !!event.type,\r\n        ],\r\n        [\r\n            \"tableEventIndicatorsClass\",\r\n            \"o-dpck__table__event--\",\r\n            datepicker.value.indicators,\r\n            !!datepicker.value.indicators,\r\n        ],\r\n    );\r\n    return classes.value;\r\n}\r\n\r\nconst tableRowClasses = defineClasses([\"tableRowClass\", \"o-dpck__table__row\"]);\r\n\r\nconst tableCellClasses = defineClasses([\r\n    \"tableCellClass\",\r\n    \"o-dpck__table__cell\",\r\n]);\r\n\r\nconst tableEventsClasses = defineClasses([\r\n    \"tableEventsClass\",\r\n    \"o-dpck__table__events\",\r\n]);\r\n\r\nconst cellEventsClass = defineClasses([\r\n    \"tableCellEventsClass\",\r\n    \"o-dpck__table__cell--events\",\r\n    null,\r\n    hasEvents,\r\n]);\r\n</script>\r\n\r\n<template>\r\n    <div :class=\"tableRowClasses\">\r\n        <div\r\n            v-if=\"datepicker.showWeekNumber\"\r\n            :class=\"tableCellClasses\"\r\n            :style=\"{\r\n                cursor: datepicker.weekNumberClickable ? 'pointer' : 'auto',\r\n            }\"\r\n            :tabindex=\"datepicker.weekNumberClickable ? 0 : null\"\r\n            role=\"button\"\r\n            @click.prevent=\"clickWeekNumber(getWeekNumber(week[6]))\"\r\n            @keydown.enter.prevent=\"clickWeekNumber(getWeekNumber(week[6]))\">\r\n            <span>{{ getWeekNumber(week[6]) }}</span>\r\n        </div>\r\n        <template v-for=\"(weekDay, idx) in week\" :key=\"idx\">\r\n            <div\r\n                v-if=\"!datepicker.disabled && isDateSelectable(weekDay, month)\"\r\n                :ref=\"(el) => setDayRef(weekDay, el)\"\r\n                :class=\"cellClasses(weekDay)\"\r\n                role=\"button\"\r\n                :tabindex=\"\r\n                    day === weekDay.getDate() && month === weekDay.getMonth()\r\n                        ? null\r\n                        : 0\r\n                \"\r\n                @click.prevent=\"selectDate(weekDay)\"\r\n                @mouseenter=\"setRangeHoverEndDate(weekDay)\"\r\n                @focus=\"setRangeHoverEndDate(weekDay)\"\r\n                @keydown.enter.prevent=\"onKeydown($event, weekDay)\">\r\n                <span>{{ weekDay.getDate() }}</span>\r\n                <div\r\n                    v-if=\"eventsDateMatch(weekDay).length\"\r\n                    :class=\"tableEventsClasses\">\r\n                    <div\r\n                        v-for=\"(event, index) in eventsDateMatch(weekDay)\"\r\n                        :key=\"index\"\r\n                        :class=\"eventClasses(event)\" />\r\n                </div>\r\n            </div>\r\n            <div v-else :class=\"cellClasses(weekDay)\">\r\n                <span>{{ weekDay.getDate() }}</span>\r\n            </div>\r\n        </template>\r\n    </div>\r\n</template>\r\n","<script setup lang=\"ts\">\r\nimport { computed, ref, type PropType } from \"vue\";\r\n\r\nimport ODatepickerTableRow from \"./DatepickerTableRow.vue\";\r\n\r\nimport { isDefined } from \"@/utils/helpers\";\r\nimport { defineClasses } from \"@/composables\";\r\n\r\nimport { useDatepickerMixins } from \"./useDatepickerMixins\";\r\nimport { weekBuilder } from \"./utils\";\r\nimport type { DatepickerProps, DatepickerEvent, FocusedDate } from \"./types\";\r\n\r\ndefineOptions({\r\n    name: \"ODatepickerTable\",\r\n    configField: \"datepicker\",\r\n});\r\n\r\nconst props = defineProps({\r\n    modelValue: {\r\n        type: [Date, Array] as PropType<Date | Date[]>,\r\n        default: undefined,\r\n    },\r\n    focusedDate: { type: Object as PropType<FocusedDate>, required: true },\r\n    dayNames: { type: Array as PropType<string[]>, required: true },\r\n    monthNames: { type: Array as PropType<string[]>, required: true },\r\n    pickerProps: {\r\n        type: Object as PropType<DatepickerProps>,\r\n        required: true,\r\n    },\r\n});\r\n\r\nconst emits = defineEmits<{\r\n    /** modelValue prop two-way binding */\r\n    (e: \"update:modelValue\", value: Date | Date[]): void;\r\n    /** focusedDate prop two-way binding */\r\n    (e: \"update:focusedDate\", value: FocusedDate): void;\r\n    (e: \"range-start\", value: Date): void;\r\n    (e: \"range-end\", value: Date): void;\r\n    (e: \"week-number-click\", value: number): void;\r\n}>();\r\n\r\nconst { isDateSelectable } = useDatepickerMixins(props.pickerProps);\r\n\r\nconst focusedDateModel = defineModel<FocusedDate>(\"focusedDate\");\r\n\r\nconst selectedBeginDate = ref<Date>();\r\nconst selectedEndDate = ref<Date>();\r\nconst hoveredEndDate = ref<Date>();\r\n\r\nconst datepicker = computed<DatepickerProps>(() => props.pickerProps);\r\n\r\nconst visibleDayNames = computed(() => {\r\n    const visibleDayNames = [];\r\n    let index = datepicker.value.firstDayOfWeek;\r\n    while (visibleDayNames.length < props.dayNames.length) {\r\n        const currentDayName = props.dayNames[index % props.dayNames.length];\r\n        visibleDayNames.push(currentDayName);\r\n        index++;\r\n    }\r\n    if (datepicker.value.showWeekNumber) visibleDayNames.unshift(\"\");\r\n    return visibleDayNames;\r\n});\r\n\r\n/** Return array of all events in the specified month */\r\nconst eventsInThisMonth = computed(() => {\r\n    if (!datepicker.value.events) return [];\r\n    return datepicker.value.events\r\n        .map((event) =>\r\n            !event.date && event instanceof Date ? { date: event } : event,\r\n        )\r\n        .filter(\r\n            (event) =>\r\n                event.date.getMonth() === focusedDateModel.value.month &&\r\n                event.date.getFullYear() === focusedDateModel.value.year,\r\n        );\r\n});\r\n\r\n/** Return array of all weeks in the specified month */\r\nconst weeksInThisMonth = computed(() => {\r\n    validateFocusedDay();\r\n    const month = focusedDateModel.value.month;\r\n    const year = focusedDateModel.value.year;\r\n    const weeksInThisMonth = [];\r\n\r\n    let startingDay = 1;\r\n\r\n    while (weeksInThisMonth.length < 6) {\r\n        const newWeek = weekBuilder(\r\n            startingDay,\r\n            month,\r\n            year,\r\n            datepicker.value.firstDayOfWeek,\r\n        );\r\n        weeksInThisMonth.push(newWeek);\r\n        startingDay += 7;\r\n    }\r\n\r\n    return weeksInThisMonth;\r\n});\r\n\r\nfunction eventsInThisWeek(week: Date[]): DatepickerEvent[] {\r\n    if (!datepicker.value.events) return [];\r\n    return eventsInThisMonth.value.filter((event) => {\r\n        const stripped = new Date(event.date);\r\n        stripped.setHours(0, 0, 0, 0);\r\n        const timed = stripped.getTime();\r\n        return week.some((weekDate) => weekDate.getTime() === timed);\r\n    });\r\n}\r\n\r\nconst hoveredDateRange = computed(() => {\r\n    if (!datepicker.value.range || selectedEndDate.value) return [];\r\n    return (\r\n        hoveredEndDate.value < selectedBeginDate.value\r\n            ? [hoveredEndDate.value, selectedBeginDate.value]\r\n            : [selectedBeginDate.value, hoveredEndDate.value]\r\n    ).filter(isDefined);\r\n});\r\n\r\nfunction validateFocusedDay(): void {\r\n    const currentDate = new Date(\r\n        focusedDateModel.value.year,\r\n        focusedDateModel.value.month,\r\n        focusedDateModel.value.day,\r\n    );\r\n    if (isDateSelectable(currentDate, focusedDateModel.value.month)) return;\r\n\r\n    let day = 0;\r\n    // Number of days in the current month\r\n    const monthDays = new Date(\r\n        focusedDateModel.value.year,\r\n        focusedDateModel.value.month + 1,\r\n        0,\r\n    ).getDate();\r\n    let firstFocusable = null;\r\n    while (!firstFocusable && ++day < monthDays) {\r\n        const date = new Date(\r\n            focusedDateModel.value.year,\r\n            focusedDateModel.value.month,\r\n            day,\r\n        );\r\n        if (isDateSelectable(date, focusedDateModel.value.month)) {\r\n            firstFocusable = currentDate;\r\n            focusedDateModel.value = {\r\n                day: date.getDate(),\r\n                month: date.getMonth(),\r\n                year: date.getFullYear(),\r\n            };\r\n        }\r\n    }\r\n}\r\n\r\n// --- Event Handlers ---\r\n\r\n/** Emit input event with selected date as payload for v-model in parent */\r\nfunction onSelectedDate(date: Date): void {\r\n    if (datepicker.value.disabled) return;\r\n    if (!datepicker.value.range && !datepicker.value.multiple)\r\n        emits(\"update:modelValue\", date);\r\n    else if (datepicker.value.range) handleSelectRangeDate(date);\r\n    else if (datepicker.value.multiple) handleSelectMultipleDates(date);\r\n}\r\n\r\n/*\r\n * If both begin and end dates are set, reset the end date and set the begin date.\r\n * If only begin date is selected, emit an array of the begin date and the new date.\r\n * If not set, only set the begin date.\r\n */\r\nfunction handleSelectRangeDate(date: Date): void {\r\n    if (selectedBeginDate.value && selectedEndDate.value) {\r\n        selectedBeginDate.value = date;\r\n        selectedEndDate.value = undefined;\r\n        emits(\"range-start\", date);\r\n    } else if (selectedBeginDate.value && !selectedEndDate.value) {\r\n        if (selectedBeginDate.value > date) {\r\n            selectedEndDate.value = selectedBeginDate.value;\r\n            selectedBeginDate.value = date;\r\n        } else {\r\n            selectedEndDate.value = date;\r\n        }\r\n        emits(\"range-end\", date);\r\n        emits(\"update:modelValue\", [\r\n            selectedBeginDate.value,\r\n            selectedEndDate.value,\r\n        ]);\r\n    } else {\r\n        selectedBeginDate.value = date;\r\n        emits(\"range-start\", date);\r\n    }\r\n}\r\n\r\n/*\r\n * If selected date already exists list of selected dates, remove it from the list\r\n * Otherwise, add date to list of selected dates\r\n */\r\nfunction handleSelectMultipleDates(date: Date): void {\r\n    if (!Array.isArray(props.modelValue)) return;\r\n\r\n    let multipleSelectedDates = props.modelValue;\r\n    const multipleSelect = multipleSelectedDates.filter(\r\n        (selectedDate) =>\r\n            selectedDate.getDate() === date.getDate() &&\r\n            selectedDate.getFullYear() === date.getFullYear() &&\r\n            selectedDate.getMonth() === date.getMonth(),\r\n    );\r\n    if (multipleSelect.length) {\r\n        multipleSelectedDates = multipleSelectedDates.filter(\r\n            (selectedDate) =>\r\n                selectedDate.getDate() !== date.getDate() ||\r\n                selectedDate.getFullYear() !== date.getFullYear() ||\r\n                selectedDate.getMonth() !== date.getMonth(),\r\n        );\r\n    } else {\r\n        multipleSelectedDates = [...multipleSelectedDates, date];\r\n    }\r\n    emits(\"update:modelValue\", multipleSelectedDates);\r\n}\r\n\r\nfunction onRangeHoverEndDate(date: Date): void {\r\n    hoveredEndDate.value = date;\r\n}\r\n\r\nfunction onChangeFocus(date: Date): void {\r\n    focusedDateModel.value = {\r\n        day: date.getDate(),\r\n        month: date.getMonth(),\r\n        year: date.getFullYear(),\r\n    };\r\n}\r\n\r\n// --- Computed Component Classes ---\r\n\r\nconst tableClasses = defineClasses([\"tableClass\", \"o-dpck__table\"]);\r\n\r\nconst tableHeadClasses = defineClasses([\r\n    \"tableHeadClass\",\r\n    \"o-dpck__table__head\",\r\n]);\r\n\r\nconst tableCellClasses = defineClasses([\r\n    \"tableCellClass\",\r\n    \"o-dpck__table__cell\",\r\n]);\r\n\r\nconst tableHeadCellClasses = defineClasses([\r\n    \"tableHeadCellClass\",\r\n    \"o-dpck__table__head-cell\",\r\n]);\r\n\r\nconst tableBodyClasses = defineClasses([\r\n    \"tableBodyClass\",\r\n    \"o-dpck__table__body\",\r\n]);\r\n</script>\r\n\r\n<template>\r\n    <section :class=\"tableClasses\">\r\n        <header :class=\"tableHeadClasses\">\r\n            <div\r\n                v-for=\"(day, index) in visibleDayNames\"\r\n                :key=\"index\"\r\n                :class=\"[...tableCellClasses, ...tableHeadCellClasses]\">\r\n                <span>{{ day }}</span>\r\n            </div>\r\n        </header>\r\n        <div :class=\"tableBodyClasses\">\r\n            <o-datepicker-table-row\r\n                v-for=\"(week, index) in weeksInThisMonth\"\r\n                :key=\"index\"\r\n                :selected-date=\"modelValue\"\r\n                :day=\"focusedDateModel.day\"\r\n                :week=\"week\"\r\n                :month=\"focusedDateModel.month\"\r\n                :events=\"eventsInThisWeek(week)\"\r\n                :hovered-date-range=\"hoveredDateRange\"\r\n                :picker-props=\"props.pickerProps\"\r\n                @select=\"onSelectedDate\"\r\n                @hover-enddate=\"onRangeHoverEndDate\"\r\n                @change-focus=\"onChangeFocus\"\r\n                @week-number-click=\"$emit('week-number-click', $event)\" />\r\n        </div>\r\n    </section>\r\n</template>\r\n","<script setup lang=\"ts\">\r\nimport {\r\n    computed,\r\n    ref,\r\n    nextTick,\r\n    watch,\r\n    type PropType,\r\n    type ComponentPublicInstance,\r\n} from \"vue\";\r\n\r\nimport { isDefined } from \"@/utils/helpers\";\r\nimport { defineClasses } from \"@/composables\";\r\n\r\nimport type { DatepickerProps, DatepickerEvent, FocusedDate } from \"./types\";\r\nimport type { ClassBind } from \"@/types\";\r\n\r\ndefineOptions({\r\n    name: \"ODatepickerMonth\",\r\n    configField: \"datepicker\",\r\n    inheritAttrs: false,\r\n});\r\n\r\nconst props = defineProps({\r\n    modelValue: {\r\n        type: [Date, Array] as PropType<Date | Date[]>,\r\n        default: undefined,\r\n    },\r\n    monthNames: { type: Array as PropType<string[]>, required: true },\r\n    focusedDate: { type: Object as PropType<FocusedDate>, required: true },\r\n    pickerProps: {\r\n        type: Object as PropType<DatepickerProps>,\r\n        required: true,\r\n    },\r\n});\r\n\r\nconst emits = defineEmits<{\r\n    /** modelValue prop two-way binding */\r\n    (e: \"update:modelValue\", value: Date | Date[]): void;\r\n    /** focusedDate prop two-way binding */\r\n    (e: \"update:focusedDate\", value: FocusedDate): void;\r\n    (e: \"range-start\", value: Date): void;\r\n    (e: \"range-end\", value: Date): void;\r\n}>();\r\n\r\nconst selectedBeginDate = ref<Date>();\r\nconst selectedEndDate = ref<Date>();\r\nconst hoveredEndDate = ref<Date>();\r\n\r\nconst datepicker = computed<DatepickerProps>(() => props.pickerProps);\r\n\r\nconst hasEvents = computed(() => !!datepicker.value.events?.length);\r\n\r\nconst monthRefs = ref(new Map());\r\n\r\nfunction setMonthRef(date: Date, el: Element | ComponentPublicInstance): void {\r\n    const refKey = `month-${date.getMonth()}`;\r\n    if (el) monthRefs.value.set(refKey, el);\r\n}\r\n\r\nwatch(\r\n    () => props.focusedDate.month,\r\n    (month) => {\r\n        const refKey = `month-${month}`;\r\n        nextTick(() => {\r\n            // $nextTick is needed when month is changed\r\n            const ref = monthRefs.value.get(refKey);\r\n            if (ref?.length > 0 && ref[0]) {\r\n                ref[0].focus();\r\n            }\r\n        });\r\n    },\r\n);\r\n\r\n/** Return array of all events in the specified month */\r\nconst eventsInThisYear = computed(() => {\r\n    if (!datepicker.value.events) return [];\r\n\r\n    return datepicker.value.events\r\n        .map((event) => {\r\n            if (!event.date && event instanceof Date) event = { date: event };\r\n            if (!event.type) event.type = \"is-primary\";\r\n            return event;\r\n        })\r\n        .filter((event) => event.date.getFullYear() === props.focusedDate.year);\r\n});\r\n\r\nconst monthDates = computed(() => {\r\n    const year = props.focusedDate.year;\r\n    const months = [];\r\n    for (let i = 0; i < 12; i++) {\r\n        const d = new Date(year, i, 1);\r\n        d.setHours(0, 0, 0, 0);\r\n        months.push(d);\r\n    }\r\n    return months;\r\n});\r\n\r\nconst hoveredDateRange = computed(() => {\r\n    if (!datepicker.value.range || !selectedEndDate.value) return [];\r\n\r\n    return (\r\n        hoveredEndDate.value < selectedBeginDate.value\r\n            ? [hoveredEndDate.value, selectedBeginDate.value]\r\n            : [selectedBeginDate.value, hoveredEndDate.value]\r\n    ).filter(isDefined);\r\n});\r\n\r\nfunction eventsDateMatch(day): DatepickerEvent[] {\r\n    if (!eventsInThisYear.value.length) return [];\r\n    return eventsInThisYear.value.filter(\r\n        (event) => event.date.getMonth() === day.getMonth(),\r\n    );\r\n}\r\n\r\nfunction isDateSelectable(date: Date): boolean {\r\n    const validity = [];\r\n\r\n    if (datepicker.value.minDate)\r\n        validity.push(date >= datepicker.value.minDate);\r\n    if (datepicker.value.maxDate)\r\n        validity.push(date <= datepicker.value.maxDate);\r\n\r\n    validity.push(date.getFullYear() === props.focusedDate.year);\r\n\r\n    if (datepicker.value.selectableDates) {\r\n        if (typeof datepicker.value.selectableDates === \"function\") {\r\n            if (datepicker.value.selectableDates(date)) return true;\r\n            else validity.push(false);\r\n        } else {\r\n            for (let i = 0; i < datepicker.value.selectableDates.length; i++) {\r\n                const enabledDate = datepicker.value.selectableDates[i];\r\n                if (\r\n                    date.getFullYear() === enabledDate.getFullYear() &&\r\n                    date.getMonth() === enabledDate.getMonth()\r\n                )\r\n                    return true;\r\n                else validity.push(false);\r\n            }\r\n        }\r\n    }\r\n\r\n    if (datepicker.value.unselectableDates) {\r\n        if (typeof datepicker.value.unselectableDates === \"function\") {\r\n            validity.push(!datepicker.value.unselectableDates(date));\r\n        } else {\r\n            for (\r\n                let i = 0;\r\n                i < datepicker.value.unselectableDates.length;\r\n                i++\r\n            ) {\r\n                const disabledDate = datepicker.value.unselectableDates[i];\r\n                validity.push(\r\n                    date.getFullYear() !== disabledDate.getFullYear() ||\r\n                        date.getMonth() !== disabledDate.getMonth(),\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n    if (datepicker.value.unselectableDaysOfWeek) {\r\n        for (\r\n            let i = 0;\r\n            i < datepicker.value.unselectableDaysOfWeek.length;\r\n            i++\r\n        ) {\r\n            const dayOfWeek = datepicker.value.unselectableDaysOfWeek[i];\r\n            validity.push(date.getDay() !== dayOfWeek);\r\n        }\r\n    }\r\n\r\n    return validity.indexOf(false) < 0;\r\n}\r\n\r\n// --- Event Handlers ---\r\n\r\nfunction onKeydown(event: KeyboardEvent, weekDay: Date): void {\r\n    let preventDefault = true;\r\n    switch (event.key) {\r\n        case \"Tab\": {\r\n            preventDefault = false;\r\n            break;\r\n        }\r\n        case \" \":\r\n        case \"Space\":\r\n        case \"Spacebar\":\r\n        case \"Enter\": {\r\n            selectDate(weekDay);\r\n            break;\r\n        }\r\n\r\n        case \"ArrowLeft\":\r\n        case \"Left\": {\r\n            changeFocus(weekDay, -1);\r\n            break;\r\n        }\r\n        case \"ArrowRight\":\r\n        case \"Right\": {\r\n            changeFocus(weekDay, 1);\r\n            break;\r\n        }\r\n        case \"ArrowUp\":\r\n        case \"Up\": {\r\n            changeFocus(weekDay, -7);\r\n            break;\r\n        }\r\n        case \"ArrowDown\":\r\n        case \"Down\": {\r\n            changeFocus(weekDay, 7);\r\n            break;\r\n        }\r\n    }\r\n    if (preventDefault) event.preventDefault();\r\n}\r\n\r\n/*\r\n * Emit update:modelValue event with selected date as payload for v-model in parent\r\n */\r\nfunction selectDate(date: Date): void {\r\n    if (datepicker.value.disabled) return;\r\n    if (\r\n        !datepicker.value.range &&\r\n        !datepicker.value.multiple &&\r\n        isDateSelectable(date)\r\n    )\r\n        emits(\"update:modelValue\", date);\r\n    else if (datepicker.value.range) handleSelectRangeDate(date);\r\n    else if (datepicker.value.multiple) handleSelectMultipleDates(date);\r\n}\r\n\r\n/*\r\n * If both begin and end dates are set, reset the end date and set the begin date.\r\n * If only begin date is selected, emit an array of the begin date and the new date.\r\n * If not set, only set the begin date.\r\n */\r\nfunction handleSelectRangeDate(date: Date): void {\r\n    if (selectedBeginDate.value && selectedEndDate.value) {\r\n        selectedBeginDate.value = date;\r\n        selectedEndDate.value = undefined;\r\n        emits(\"range-start\", date);\r\n    } else if (selectedBeginDate.value && !selectedEndDate.value) {\r\n        if (selectedBeginDate.value > date) {\r\n            selectedEndDate.value = selectedBeginDate.value;\r\n            selectedBeginDate.value = date;\r\n        } else {\r\n            selectedEndDate.value = date;\r\n        }\r\n        emits(\"range-end\", date);\r\n        emits(\"update:modelValue\", [\r\n            selectedBeginDate.value,\r\n            selectedEndDate.value,\r\n        ]);\r\n    } else {\r\n        selectedBeginDate.value = date;\r\n        emits(\"range-start\", date);\r\n    }\r\n}\r\n\r\nconst multipleSelectedDates = computed(() =>\r\n    datepicker.value.multiple && props.modelValue ? props.modelValue : [],\r\n);\r\n\r\nfunction handleSelectMultipleDates(date: Date): void {\r\n    if (!Array.isArray(props.modelValue)) return;\r\n    let multipleSelectedDates = props.modelValue;\r\n\r\n    const multipleSelect = multipleSelectedDates.filter(\r\n        (selectedDate) =>\r\n            selectedDate.getDate() === date.getDate() &&\r\n            selectedDate.getFullYear() === date.getFullYear() &&\r\n            selectedDate.getMonth() === date.getMonth(),\r\n    );\r\n    if (multipleSelect.length) {\r\n        multipleSelectedDates = multipleSelectedDates.filter(\r\n            (selectedDate) =>\r\n                selectedDate.getDate() !== date.getDate() ||\r\n                selectedDate.getFullYear() !== date.getFullYear() ||\r\n                selectedDate.getMonth() !== date.getMonth(),\r\n        );\r\n    } else {\r\n        multipleSelectedDates.push(date);\r\n    }\r\n    emits(\"update:modelValue\", multipleSelectedDates);\r\n}\r\n\r\nfunction changeFocus(month: Date, inc: number): void {\r\n    month.setMonth(month.getMonth() + inc);\r\n    const focused = {\r\n        day: month.getDate(),\r\n        month: month.getMonth(),\r\n        year: month.getFullYear(),\r\n    };\r\n    emits(\"update:focusedDate\", focused);\r\n}\r\n\r\nfunction onRangeHoverEndDate(day: Date): void {\r\n    if (datepicker.value.range) hoveredEndDate.value = day;\r\n}\r\n\r\n// --- Computed Component Classes ---\r\n\r\nfunction dateMatch(dateOne, dateTwo, multiple = false): boolean {\r\n    // if either date is null or undefined, return false\r\n    if (!dateOne || !dateTwo || multiple) return false;\r\n    if (Array.isArray(dateTwo))\r\n        return dateTwo.some(\r\n            (date) =>\r\n                dateOne.getFullYear() === date.getFullYear() &&\r\n                dateOne.getMonth() === date.getMonth(),\r\n        );\r\n    return (\r\n        dateOne.getFullYear() === dateTwo.getFullYear() &&\r\n        dateOne.getMonth() === dateTwo.getMonth()\r\n    );\r\n}\r\n\r\nfunction dateWithin(dateOne, dates, multiple = false): boolean {\r\n    if (!Array.isArray(dates) || multiple) return false;\r\n    return dateOne > dates[0] && dateOne < dates[1];\r\n}\r\n\r\nfunction dateMultipleSelected(dateOne, dates, multiple = false): boolean {\r\n    if (!Array.isArray(dates) || !multiple) return false;\r\n    return dates.some(\r\n        (date) =>\r\n            dateOne.getDate() === date.getDate() &&\r\n            dateOne.getFullYear() === date.getFullYear() &&\r\n            dateOne.getMonth() === date.getMonth(),\r\n    );\r\n}\r\n\r\nconst monthClasses = defineClasses([\"monthClass\", \"o-dpck__month\"]);\r\n\r\nconst monthBodyClasses = defineClasses([\r\n    \"monthBodyClass\",\r\n    \"o-dpck__month__body\",\r\n]);\r\n\r\nconst monthTableClasses = defineClasses([\r\n    \"monthTableClass\",\r\n    \"o-dpck__month__table\",\r\n]);\r\n\r\nconst monthCellClasses = defineClasses(\r\n    [\"monthCellClass\", \"o-dpck__month__cell\"],\r\n    [\"monthCellEventsClass\", \"o-dpck__month__cell--events\", null, hasEvents],\r\n);\r\n\r\n/**\r\n * Build cellClasses for cell using validations\r\n */\r\nfunction cellClasses(day: Date): ClassBind[] {\r\n    const classes = defineClasses(\r\n        [\r\n            \"monthCellSelectedClass\",\r\n            \"o-dpck__month__cell--selected\",\r\n            null,\r\n            dateMatch(day, props.modelValue, datepicker.value.multiple) ||\r\n                dateWithin(day, props.modelValue, datepicker.value.multiple) ||\r\n                dateMultipleSelected(\r\n                    day,\r\n                    multipleSelectedDates.value,\r\n                    datepicker.value.multiple,\r\n                ),\r\n        ],\r\n\r\n        [\r\n            \"monthCellFirstSelectedClass\",\r\n            \"o-dpck__month__cell--first-selected\",\r\n            null,\r\n            dateMatch(\r\n                day,\r\n                Array.isArray(props.modelValue) && props.modelValue[0],\r\n                datepicker.value.multiple,\r\n            ),\r\n        ],\r\n        [\r\n            \"monthCellWithinSelectedClass\",\r\n            \"o-dpck__month__cell--within-selected\",\r\n            null,\r\n            dateWithin(day, props.modelValue, datepicker.value.multiple),\r\n        ],\r\n        [\r\n            \"monthCellLastSelectedClass\",\r\n            \"o-dpck__month__cell--last-selected\",\r\n            null,\r\n            dateMatch(\r\n                day,\r\n                Array.isArray(props.modelValue) && props.modelValue[1],\r\n                datepicker.value.multiple,\r\n            ),\r\n        ],\r\n        [\r\n            \"monthCellWithinHoveredRangeClass\",\r\n            \"o-dpck__month__cell--within-hovered-range\",\r\n            null,\r\n            hoveredDateRange.value &&\r\n                hoveredDateRange.value.length === 2 &&\r\n                (dateMatch(day, hoveredDateRange.value) ||\r\n                    dateWithin(day, hoveredDateRange.value)),\r\n        ],\r\n        [\r\n            \"monthCellFirstHoveredClass\",\r\n            \"o-dpck__month__cell--first-hovered\",\r\n            null,\r\n            dateMatch(\r\n                day,\r\n                Array.isArray(hoveredDateRange.value) &&\r\n                    hoveredDateRange.value[0],\r\n            ),\r\n        ],\r\n        [\r\n            \"monthCellWithinHoveredClass\",\r\n            \"o-dpck__month__cell--within-hovered\",\r\n            null,\r\n            dateWithin(day, hoveredDateRange.value),\r\n        ],\r\n        [\r\n            \"monthCellLastHoveredClass\",\r\n            \"o-dpck__month__cell--last-hovered\",\r\n            null,\r\n            dateMatch(\r\n                day,\r\n                Array.isArray(hoveredDateRange.value) &&\r\n                    hoveredDateRange.value[1],\r\n            ),\r\n        ],\r\n        [\r\n            \"monthCellTodayClass\",\r\n            \"o-dpck__month__cell--today\",\r\n            null,\r\n            dateMatch(day, datepicker.value.dateCreator()),\r\n        ],\r\n        [\r\n            \"monthCellSelectableclass\",\r\n            \"o-dpck__month__cell--selectable\",\r\n            null,\r\n            isDateSelectable(day) && !datepicker.value.disabled,\r\n        ],\r\n        [\r\n            \"monthCellUnselectableClass\",\r\n            \"o-dpck__month__cell--unselectable\",\r\n            null,\r\n            !isDateSelectable(day) || datepicker.value.disabled,\r\n        ],\r\n    );\r\n\r\n    return [...monthCellClasses.value, ...classes.value];\r\n}\r\n</script>\r\n\r\n<template>\r\n    <section :class=\"monthClasses\">\r\n        <div :class=\"monthBodyClasses\">\r\n            <div :class=\"monthTableClasses\">\r\n                <template v-for=\"(date, idx) in monthDates\" :key=\"idx\">\r\n                    <div\r\n                        v-if=\"!datepicker.disabled && isDateSelectable(date)\"\r\n                        :ref=\"(el) => setMonthRef(date, el)\"\r\n                        :class=\"cellClasses(date)\"\r\n                        role=\"button\"\r\n                        :disabled=\"datepicker.disabled\"\r\n                        :tabindex=\"\r\n                            focusedDate.month === date.getMonth() ? null : 0\r\n                        \"\r\n                        @click.prevent=\"selectDate(date)\"\r\n                        @mouseenter=\"onRangeHoverEndDate(date)\"\r\n                        @focus=\"onRangeHoverEndDate(date)\"\r\n                        @keydown.prevent=\"onKeydown($event, date)\">\r\n                        {{ monthNames[date.getMonth()] }}\r\n                        <div v-if=\"eventsDateMatch(date).length\" class=\"events\">\r\n                            <div\r\n                                v-for=\"(event, index) in eventsDateMatch(date)\"\r\n                                :key=\"index\"\r\n                                class=\"event\"\r\n                                :class=\"event.type\" />\r\n                        </div>\r\n                    </div>\r\n                    <div v-else :class=\"cellClasses(date)\">\r\n                        {{ monthNames[date.getMonth()] }}\r\n                    </div>\r\n                </template>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</template>\r\n","<script setup lang=\"ts\">\r\nimport { computed, ref, watch, type PropType } from \"vue\";\r\n\r\nimport OButton from \"../button/Button.vue\";\r\nimport OSelect from \"../select/Select.vue\";\r\nimport OPickerWrapper from \"../utils/PickerWrapper.vue\";\r\nimport ODatepickerTable from \"./DatepickerTable.vue\";\r\nimport ODatepickerMonth from \"./DatepickerMonth.vue\";\r\n\r\nimport { getOption } from \"@/utils/config\";\r\nimport { defineClasses, getActiveClasses, useMatchMedia } from \"@/composables\";\r\n\r\nimport { useDatepickerMixins } from \"./useDatepickerMixins\";\r\nimport { getMonthNames, getWeekdayNames } from \"./utils\";\r\n\r\nimport type { DatepickerEvent, FocusedDate } from \"./types\";\r\nimport type { ComponentClass, OrugaOptions } from \"@/types\";\r\n\r\n/**\r\n * An input with a simple dropdown/modal for selecting a date, uses native datepicker for mobile\r\n * @displayName Datepicker\r\n * @style _datepicker.scss\r\n */\r\ndefineOptions({\r\n    isOruga: true,\r\n    name: \"ODatepicker\",\r\n    configField: \"datepicker\",\r\n});\r\n\r\nconst props = defineProps({\r\n    /** Override existing theme classes completely */\r\n    override: { type: Boolean, default: undefined },\r\n    /** @model */\r\n    modelValue: {\r\n        type: [Date, Array] as PropType<Date | Date[]>,\r\n        default: undefined,\r\n    },\r\n    /** The active state of the dropdown, use v-model:active to make it two-way binding. */\r\n    active: { type: Boolean, default: false },\r\n    /**\r\n     * Define picker mode\r\n     * @values date, month\r\n     */\r\n    type: {\r\n        type: String,\r\n        default: \"date\",\r\n        validator: (value: string) => [\"month\", \"date\"].indexOf(value) >= 0,\r\n    },\r\n    /** Set custom day names, else use names based on locale */\r\n    dayNames: {\r\n        type: Array as PropType<string[]>,\r\n        default: () => getOption(\"datepicker.dayNames\", undefined),\r\n    },\r\n    /** Set custom month names, else use names based on locale */\r\n    monthNames: {\r\n        type: Array as PropType<string[]>,\r\n        default: () => getOption(\"datepicker.monthNames\", undefined),\r\n    },\r\n    /**\r\n     * Size of the control input\r\n     * @values small, medium, large\r\n     */\r\n    size: {\r\n        type: String,\r\n        default: () => getOption(\"datepicker.size\"),\r\n    },\r\n    /** Set default date to focus on */\r\n    focusedDate: { type: Date, default: undefined },\r\n    /** Events to display on picker */\r\n    events: { type: Array as PropType<DatepickerEvent[]>, default: undefined },\r\n    /** Event indicators for style class definiton */\r\n    indicators: { type: String, default: \"dots\" },\r\n    /** Min date to select */\r\n    minDate: { type: Date, default: undefined },\r\n    /** Max date to select */\r\n    maxDate: { type: Date, default: undefined },\r\n    /** Enable date range selection */\r\n    range: { type: Boolean, default: false },\r\n    /** Makes input full width when inside a grouped or addon field */\r\n    expanded: { type: Boolean, default: false },\r\n    /** Makes the input rounded */\r\n    rounded: { type: Boolean, default: false },\r\n    /** Display datepicker inline */\r\n    inline: { type: Boolean, default: false },\r\n    /** Input placeholder */\r\n    placeholder: { type: String, default: undefined },\r\n    /** Same as native input readonly */\r\n    readonly: { type: Boolean, default: true },\r\n    /** Same as native, also push new item to v-model instead of replacing */\r\n    multiple: { type: Boolean, default: false },\r\n    /** Same as native disabled */\r\n    disabled: { type: Boolean, default: false },\r\n    /** Open dropdown on focus */\r\n    openOnFocus: {\r\n        type: Boolean,\r\n        default: () => getOption(\"datepicker.openOnFocus\", true),\r\n    },\r\n    /** Close dropdown on click */\r\n    closeOnClick: {\r\n        type: Boolean,\r\n        default: () => getOption(\"datepicker.closeOnClick\", true),\r\n    },\r\n    /** Date format locale */\r\n    locale: {\r\n        type: String,\r\n        default: () => getOption(\"locale\"),\r\n    },\r\n    /** Custom function to format a date into a string */\r\n    dateFormatter: {\r\n        type: Function as PropType<(date: Date | Date[]) => string>,\r\n        default: (\r\n            date: Date | Date[],\r\n            defaultFunction: (date: Date | Date[]) => string,\r\n        ) => getOption(\"datepicker.dateFormatter\", defaultFunction)(date),\r\n    },\r\n    /** Custom function to parse a string into a date */\r\n    dateParser: {\r\n        type: Function as PropType<(date: string) => Date>,\r\n        default: (date: string, defaultFunction: (date: string) => Date) =>\r\n            getOption(\"datepicker.dateParser\", defaultFunction)(date),\r\n    },\r\n    /** Date creator function, default is `new Date()` */\r\n    dateCreator: {\r\n        type: Function as PropType<() => Date>,\r\n        default: () => getOption(\"datepicker.dateCreator\", () => new Date())(),\r\n    },\r\n    /** Define a list of dates which can be selected */\r\n    selectableDates: {\r\n        type: [Array, Function] as PropType<Date[] | ((date: Date) => boolean)>,\r\n        default: () => [],\r\n    },\r\n    /** Define a list of dates which can not be selected */\r\n    unselectableDates: {\r\n        type: [Array, Function] as PropType<Date[] | ((date: Date) => boolean)>,\r\n        default: () => [],\r\n    },\r\n    /** Define a list of weeks which can not be selected */\r\n    unselectableDaysOfWeek: {\r\n        type: Array as PropType<number[]>,\r\n        default: () =>\r\n            getOption(\"datepicker.unselectableDaysOfWeek\", undefined),\r\n    },\r\n    /** Show nearby month days */\r\n    nearbyMonthDays: {\r\n        type: Boolean,\r\n        default: () => getOption(\"datepicker.nearbyMonthDays\", true),\r\n    },\r\n    /** Define if nearby month days can be selected */\r\n    nearbySelectableMonthDays: {\r\n        type: Boolean,\r\n        default: () => getOption(\"datepicker.nearbySelectableMonthDays\", false),\r\n    },\r\n    /** Show weeek numbers */\r\n    showWeekNumber: {\r\n        type: Boolean,\r\n        default: () => getOption(\"datepicker.showWeekNumber\", false),\r\n    },\r\n    /** Define if weeek numbers are clickable */\r\n    weekNumberClickable: {\r\n        type: Boolean,\r\n        default: () => getOption(\"datepicker.weekNumberClickable\", false),\r\n    },\r\n    /** Set the first day of a week */\r\n    firstDayOfWeek: {\r\n        type: Number,\r\n        default: () => getOption(\"datepicker.firstDayOfWeek\", 0),\r\n    },\r\n    /** Rules for the first week : 1 for the 1st January, 4 for the 4th January */\r\n    rulesForFirstWeek: { type: Number, default: () => 4 },\r\n    /** Define the range of years to show */\r\n    yearsRange: {\r\n        type: Array as PropType<number[]>,\r\n        default: () => getOption(\"datepicker.yearsRange\", [-100, 10]),\r\n    },\r\n    /** Trap dropdown on focus */\r\n    trapFocus: {\r\n        type: Boolean,\r\n        default: () => getOption(\"datepicker.trapFocus\", true),\r\n    },\r\n    /** Position of the dropdown relative to the input */\r\n    position: { type: String, default: undefined },\r\n    /** Enable dropdown mobile modal */\r\n    mobileModal: {\r\n        type: Boolean,\r\n        default: () => getOption(\"datepicker.mobileModal\", true),\r\n    },\r\n    /** Enable mobile native input if mobile agent */\r\n    mobileNative: {\r\n        type: Boolean,\r\n        default: () => getOption(\"datepicker.mobileNative\", true),\r\n    },\r\n    /**\r\n     * Icon pack to use\r\n     * @values mdi, fa, fas and any other custom icon pack\r\n     */\r\n    iconPack: {\r\n        type: String,\r\n        default: () => getOption(\"datepicker.iconPack\", undefined),\r\n    },\r\n    /** Icon to be shown */\r\n    icon: {\r\n        type: String,\r\n        default: () => getOption(\"datepicker.icon\", undefined),\r\n    },\r\n    /** Icon to be added on the right side */\r\n    iconRight: {\r\n        type: String,\r\n        default: () => getOption(\"datepicker.iconRight\", undefined),\r\n    },\r\n    /** Make the icon right clickable */\r\n    iconRightClickable: { type: Boolean, default: false },\r\n    /** Icon name for previous icon */\r\n    iconPrev: {\r\n        type: String,\r\n        default: () => getOption(\"datepicker.iconPrev\", \"chevron-left\"),\r\n    },\r\n    /** Icon name for next icon */\r\n    iconNext: {\r\n        type: String,\r\n        default: () => getOption(\"datepicker.iconNext\", \"chevron-right\"),\r\n    },\r\n    /** Mobile breakpoint as max-width value */\r\n    mobileBreakpoint: {\r\n        type: String,\r\n        default: () => getOption(\"datepicker.mobileBreakpoint\"),\r\n    },\r\n    /**\r\n     * Append the component to another part of the DOM.\r\n     * Set `true` to append the component to the body.\r\n     * In addition, any CSS selector string or an actual DOM node can be used.\r\n     */\r\n    teleport: {\r\n        type: [Boolean, String, Object],\r\n        default: () => getOption(\"datepicker.teleport\", false),\r\n    },\r\n    /** Enable html 5 native validation */\r\n    useHtml5Validation: {\r\n        type: Boolean,\r\n        default: () => getOption(\"useHtml5Validation\", true),\r\n    },\r\n    /** The message which is shown when a validation error occurs */\r\n    validationMessage: { type: String, default: undefined },\r\n    /** Accessibility next button aria label */\r\n    ariaNextLabel: {\r\n        type: String,\r\n        default: () => getOption(\"datepicker.ariaNextLabel\", \"Next Page\"),\r\n    },\r\n    /** Accessibility previous button aria label  */\r\n    ariaPreviousLabel: {\r\n        type: String,\r\n        default: () => getOption(\"datepicker.ariaNextLabel\", \"Previous Page\"),\r\n    },\r\n    // class props (will not be displayed in the docs)\r\n    /** Class of the root element */\r\n    rootClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the Datepicker size */\r\n    sizeClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the Datepicker box where you choose the date */\r\n    boxClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the Datepicker header inside the box */\r\n    headerClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the Datepicker buttons inside the box */\r\n    headerButtonsClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the Datepicker buttons inside the box when a size is choosen */\r\n    headerButtonsSizeClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the prev button inside the Datepicker box */\r\n    prevButtonClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the next button inside the Datepicker box */\r\n    nextButtonClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the month and year selects container inside the Datepicker box */\r\n    listsClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the Datepicker footer */\r\n    footerClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the Datepicker table inside the box */\r\n    tableClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of Datepicker header with days of the week inside the table */\r\n    tableHeadClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the cell inside the table header */\r\n    tableHeadCellClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table body inside the box */\r\n    tableBodyClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table row */\r\n    tableRowClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cell */\r\n    tableCellClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cell when nearby month days are hidden */\r\n    tableCellInvisibleClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of table cell when it's selected */\r\n    tableCellSelectedClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the first selected table cell when in range */\r\n    tableCellFirstSelectedClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cells within the range when the range is selected */\r\n    tableCellWithinSelectedClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the last selected table cell during range selection */\r\n    tableCellLastSelectedClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the first hovered table cell during range selection */\r\n    tableCellFirstHoveredClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cell when hovered during range selection */\r\n    tableCellWithinHoveredClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the last table cell hovered during range selection */\r\n    tableCellLastHoveredClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cell of the current day */\r\n    tableCellTodayClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cell that is selectable */\r\n    tableCellSelectableClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cell that is unselectable */\r\n    tableCellUnselectableClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cell when nearby days (prev/next month) are selectable */\r\n    tableCellNearbyClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the cell of a row when at least one event is present */\r\n    tableCellEventsClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the events container */\r\n    tableEventsClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the event */\r\n    tableEventClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the event indicator when a `variant` is specified */\r\n    tableEventVariantClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the event indicator */\r\n    tableEventIndicatorsClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the Datepicker table inside the box when type is month */\r\n    monthClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table body inside the box when type is month */\r\n    monthBodyClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table container when type is month */\r\n    monthTableClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cell when type is month */\r\n    monthCellClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of table cell when it's selected when type is month */\r\n    monthCellSelectedClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the first selected table cell when in range when type is month */\r\n    monthCellFirstSelectedClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cells within the range when the range is selected when type is month */\r\n    monthCellWithinSelectedClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the last selected table cell during range selection when type is month */\r\n    monthCellLastSelectedClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the first hovered table cell during range selection when type is month */\r\n    monthCellWithinHoveredRangeClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cell when hovered during range selection when type is month */\r\n    monthCellFirstHoveredClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cell when hovered during range selection and cell is in range when type is month */\r\n    monthCellWithinHoveredClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the last table cell hovered during range selection when type is month */\r\n    monthCellLastHoveredClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cell of the current day when type is month */\r\n    monthCellTodayClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cell that is selectable when type is month */\r\n    monthCellSelectableClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the table cell that is unselectable when type is month */\r\n    monthCellUnselectableClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /**Class of the events container when type is month */\r\n    monthCellEventsClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /** Class of the Datepicker when on mobile */\r\n    mobileClass: {\r\n        type: [String, Array, Function] as PropType<ComponentClass>,\r\n        default: undefined,\r\n    },\r\n    /**\r\n     * Class configuration for the internal input component\r\n     * @ignore\r\n     */\r\n    inputClasses: {\r\n        type: Object,\r\n        default: () =>\r\n            getOption<OrugaOptions[\"input\"]>(\"datepicker.inputClasses\", {}),\r\n    },\r\n    /**\r\n     * Class configuration for the internal dropdown component\r\n     * @ignore\r\n     */\r\n    dropdownClasses: {\r\n        type: Object,\r\n        default: () =>\r\n            getOption<OrugaOptions[\"dropdown\"]>(\r\n                \"datepicker.dropdownClasses\",\r\n                {},\r\n            ),\r\n    },\r\n    /**\r\n     * Class configuration for the internal select component\r\n     * @ignore\r\n     */\r\n    selectClasses: {\r\n        type: Object,\r\n        default: () =>\r\n            getOption<OrugaOptions[\"select\"]>(\"datepicker.selectClasses\", {}),\r\n    },\r\n});\r\n\r\nconst emits = defineEmits<{\r\n    /**\r\n     * modelValue prop two-way binding\r\n     * @param value {Date | Date[]} updated modelValue prop\r\n     */\r\n    (e: \"update:modelValue\", value: Date | Date[]): void;\r\n    /**\r\n     * active prop two-way binding\r\n     * @param value {boolean} updated active prop\r\n     */\r\n    (e: \"update:active\", value: boolean): void;\r\n    /**\r\n     * on range start is selected event\r\n     * @param value {Date} range start date\r\n     */\r\n    (e: \"range-start\", value: Date): void;\r\n    /**\r\n     * on range end is selected event\r\n     * @param value {Date} range end date\r\n     */\r\n    (e: \"range-end\", value: Date): void;\r\n    /**\r\n     * on month change event\r\n     * @param value {number} month number\r\n     */\r\n    (e: \"change-month\", value: number): void;\r\n    /**\r\n     * on year change event\r\n     * @param value {number} year number\r\n     */\r\n    (e: \"change-year\", value: number): void;\r\n    /**\r\n     * on input focus event\r\n     * @param event {Event} native event\r\n     */\r\n    (e: \"focus\", event: Event): void;\r\n    /**\r\n     * on input blur event\r\n     * @param event {Event} native event\r\n     */\r\n    (e: \"blur\", event: Event): void;\r\n    /**\r\n     * on input invalid event\r\n     * @param event {Event} native event\r\n     */\r\n    (e: \"invalid\", event: Event): void;\r\n    /**\r\n     * on icon click event\r\n     * @param event {Event} native event\r\n     */\r\n    (e: \"icon-click\", event: Event): void;\r\n    /**\r\n     * on icon right click event\r\n     * @param event {Event} native event\r\n     */\r\n    (e: \"icon-right-click\", event: Event): void;\r\n}>();\r\n\r\nconst { defaultDateFormatter, defaultDateParser } = useDatepickerMixins(props);\r\n\r\nconst { isMobile } = useMatchMedia(props.mobileBreakpoint);\r\n\r\nconst pickerRef = ref<InstanceType<typeof OPickerWrapper>>();\r\n\r\n/** modelvalue of selected date */\r\nconst vmodel = defineModel<Date | Date[]>();\r\n\r\n/** Dropdown active state */\r\nconst isActive = defineModel<boolean>(\"active\");\r\n\r\n/** modelValue formated into string */\r\nconst formattedValue = computed(() =>\r\n    Array.isArray(vmodel.value)\r\n        ? (props.dateFormatter as any)([...vmodel.value], defaultDateFormatter)\r\n        : (props.dateFormatter as any)(vmodel.value, defaultDateFormatter),\r\n);\r\n\r\nconst isTypeMonth = computed(() => props.type === \"month\");\r\n\r\n/**\r\n * When v-model is changed:\r\n *   1. Update internal value.\r\n *   2. If it's invalid, validate again.\r\n */\r\nwatch(\r\n    () => props.modelValue,\r\n    (value) => {\r\n        // updateInternalState\r\n        if (vmodel.value !== value) {\r\n            const isArray = Array.isArray(value);\r\n            const currentDate = isArray\r\n                ? !value.length\r\n                    ? props.dateCreator()\r\n                    : value[value.length - 1]\r\n                : !value\r\n                  ? props.dateCreator()\r\n                  : value;\r\n            if (\r\n                !isArray ||\r\n                (isArray &&\r\n                    Array.isArray(vmodel.value) &&\r\n                    value.length > vmodel.value.length)\r\n            ) {\r\n                focusedDateData.value = {\r\n                    day: currentDate.getDate(),\r\n                    month: currentDate.getMonth(),\r\n                    year: currentDate.getFullYear(),\r\n                };\r\n            }\r\n        }\r\n    },\r\n);\r\n\r\nwatch(\r\n    () => props.focusedDate,\r\n    (value) => {\r\n        if (value) {\r\n            focusedDateData.value = {\r\n                day: value.getDate(),\r\n                month: value.getMonth(),\r\n                year: value.getFullYear(),\r\n            };\r\n        }\r\n    },\r\n);\r\n\r\nconst _initialDate =\r\n    (Array.isArray(props.modelValue)\r\n        ? props.modelValue[0]\r\n        : props.modelValue) ||\r\n    props.focusedDate ||\r\n    props.dateCreator();\r\n\r\nif (\r\n    !props.modelValue &&\r\n    props.maxDate &&\r\n    props.maxDate.getFullYear() < _initialDate.getFullYear()\r\n) {\r\n    _initialDate.setFullYear(props.maxDate.getFullYear());\r\n}\r\n\r\nconst focusedDateData = ref<FocusedDate>({\r\n    day: _initialDate.getDate(),\r\n    month: _initialDate.getMonth(),\r\n    year: _initialDate.getFullYear(),\r\n});\r\n\r\n/*\r\n * Emit input event on month and/or year change\r\n */\r\nwatch(\r\n    () => focusedDateData.value.month,\r\n    (value) => emits(\"change-month\", value),\r\n);\r\nwatch(\r\n    () => focusedDateData.value.year,\r\n    (value) => emits(\"change-year\", value),\r\n);\r\n\r\nconst computedMonthNames = computed(() =>\r\n    Array.isArray(props.monthNames)\r\n        ? props.monthNames\r\n        : getMonthNames(props.locale),\r\n);\r\n\r\nconst listOfMonths = computed(() => {\r\n    let minMonth = 0;\r\n    let maxMonth = 12;\r\n    if (\r\n        props.minDate &&\r\n        focusedDateData.value.year === props.minDate.getFullYear()\r\n    ) {\r\n        minMonth = props.minDate.getMonth();\r\n    }\r\n    if (\r\n        props.maxDate &&\r\n        focusedDateData.value.year === props.maxDate.getFullYear()\r\n    ) {\r\n        maxMonth = props.maxDate.getMonth();\r\n    }\r\n    return computedMonthNames.value.map((name, index) => ({\r\n        name: name,\r\n        index: index,\r\n        disabled: index < minMonth || index > maxMonth,\r\n    }));\r\n});\r\n\r\nconst computedDayNames = computed(() => {\r\n    if (Array.isArray(props.dayNames)) return props.dayNames;\r\n    return getWeekdayNames(props.locale);\r\n});\r\n\r\n/*\r\n * Returns an array of years for the year dropdown. If earliest/latest\r\n * dates are set by props, range of years will fall within those dates.\r\n */\r\nconst listOfYears = computed(() => {\r\n    let latestYear = focusedDateData.value.year + props.yearsRange[1];\r\n    if (props.maxDate && props.maxDate.getFullYear() < latestYear) {\r\n        latestYear = Math.max(\r\n            props.maxDate.getFullYear(),\r\n            focusedDateData.value.year,\r\n        );\r\n    }\r\n\r\n    let earliestYear = focusedDateData.value.year + props.yearsRange[0];\r\n    if (props.minDate && props.minDate.getFullYear() > earliestYear) {\r\n        earliestYear = Math.min(\r\n            props.minDate.getFullYear(),\r\n            focusedDateData.value.year,\r\n        );\r\n    }\r\n\r\n    return Array.from(\r\n        { length: latestYear - earliestYear + 1 || 1 },\r\n        (value, index) => earliestYear + index,\r\n    ).reverse();\r\n});\r\n\r\nconst showPrev = computed(() => {\r\n    if (!props.minDate) return true;\r\n    if (isTypeMonth.value)\r\n        return focusedDateData.value.year > props.minDate.getFullYear();\r\n\r\n    const dateToCheck = new Date(\r\n        focusedDateData.value.year,\r\n        focusedDateData.value.month,\r\n    );\r\n    const date = new Date(\r\n        props.minDate.getFullYear(),\r\n        props.minDate.getMonth(),\r\n    );\r\n    return dateToCheck > date;\r\n});\r\n\r\n/**\r\n * Either decrement month by 1 if not January or decrement year by 1\r\n * and set month to 11 (December) or decrement year when 'month'\r\n */\r\nfunction prev(): void {\r\n    if (props.disabled) return;\r\n\r\n    if (isTypeMonth.value) {\r\n        focusedDateData.value.year -= 1;\r\n    } else {\r\n        if (focusedDateData.value.month > 0) {\r\n            focusedDateData.value.month -= 1;\r\n        } else {\r\n            focusedDateData.value.month = 11;\r\n            focusedDateData.value.year -= 1;\r\n        }\r\n    }\r\n}\r\n\r\nconst showNext = computed(() => {\r\n    if (!props.maxDate) return true;\r\n    if (isTypeMonth.value)\r\n        return focusedDateData.value.year < props.maxDate.getFullYear();\r\n\r\n    const dateToCheck = new Date(\r\n        focusedDateData.value.year,\r\n        focusedDateData.value.month,\r\n    );\r\n    const date = new Date(\r\n        props.maxDate.getFullYear(),\r\n        props.maxDate.getMonth(),\r\n    );\r\n    return dateToCheck < date;\r\n});\r\n\r\n/**\r\n * Either increment month by 1 if not December or increment year by 1\r\n * and set month to 0 (January) or increment year when 'month'\r\n */\r\nfunction next(): void {\r\n    if (props.disabled) return;\r\n    if (isTypeMonth.value) {\r\n        focusedDateData.value.year += 1;\r\n    } else {\r\n        if (focusedDateData.value.month < 11) {\r\n            focusedDateData.value.month += 1;\r\n        } else {\r\n            focusedDateData.value.month = 0;\r\n            focusedDateData.value.year += 1;\r\n        }\r\n    }\r\n}\r\n\r\nfunction formatNative(value: Date | Date[]): string {\r\n    if (Array.isArray(value)) value = value[0];\r\n\r\n    if (!value) return \"\";\r\n    const date = new Date(value);\r\n\r\n    if (isTypeMonth.value) {\r\n        // Format date into string 'YYYY-MM'\r\n        const year = date.getFullYear();\r\n        const month = date.getMonth() + 1;\r\n        return year + \"-\" + ((month < 10 ? \"0\" : \"\") + month);\r\n    } else {\r\n        // Format date into string 'YYYY-MM-DD'\r\n        const year = date.getFullYear();\r\n        const month = date.getMonth() + 1;\r\n        const day = date.getDate();\r\n        return (\r\n            year +\r\n            \"-\" +\r\n            ((month < 10 ? \"0\" : \"\") + month) +\r\n            \"-\" +\r\n            ((day < 10 ? \"0\" : \"\") + day)\r\n        );\r\n    }\r\n}\r\n\r\n// --- Event Handler ---\r\n\r\n/** Parse string into date */\r\nfunction onChange(value: string): void {\r\n    const date = (props.dateParser as any)(value, defaultDateParser);\r\n\r\n    if (\r\n        date &&\r\n        Array.isArray(date) &&\r\n        date.length === 2 &&\r\n        !isNaN(date[0]) &&\r\n        !isNaN(date[1])\r\n    ) {\r\n        vmodel.value = date;\r\n    } else {\r\n        vmodel.value = null;\r\n    }\r\n}\r\n\r\n/** Parse date from string */\r\nfunction onChangeNativePicker(value: string): void {\r\n    const s = value ? value.split(\"-\") : [];\r\n    if (s.length === 3) {\r\n        const year = parseInt(s[0], 10);\r\n        const month = parseInt(s[1]) - 1;\r\n        const day = parseInt(s[2]);\r\n        vmodel.value = new Date(year, month, day);\r\n    } else {\r\n        vmodel.value = null;\r\n    }\r\n}\r\n\r\n// --- Computed Component Classes ---\r\n\r\nconst rootClasses = defineClasses(\r\n    [\"rootClass\", \"o-dpck\"],\r\n    [\r\n        \"sizeClass\",\r\n        \"o-dpck--\",\r\n        computed(() => props.size),\r\n        computed(() => !!props.size),\r\n    ],\r\n    [\"mobileClass\", \"o-dpck--mobile\", null, isMobile],\r\n    [\"expandedClass\", \"o-dpck--expanded\", null, computed(() => props.expanded)],\r\n);\r\n\r\nconst headerClasses = defineClasses([\"headerClass\", \"o-dpck__header\"]);\r\n\r\nconst headerButtonsClasses = defineClasses(\r\n    [\"headerButtonsClass\", \"o-dpck__header__buttons\"],\r\n    [\r\n        \"headerButtonsSizeClass\",\r\n        \"o-dpck__header__buttons--\",\r\n        computed(() => props.size),\r\n        computed(() => !!props.size),\r\n    ],\r\n);\r\n\r\nconst prevButtonClasses = defineClasses([\r\n    \"prevButtonClass\",\r\n    \"o-dpck__header__previous\",\r\n]);\r\n\r\nconst nextButtonClasses = defineClasses([\r\n    \"nextButtonClass\",\r\n    \"o-dpck__header__next\",\r\n]);\r\n\r\nconst listsClasses = defineClasses([\"listsClass\", \"o-dpck__header__list\"]);\r\n\r\nconst footerClasses = defineClasses([\"footerClass\", \"o-dpck__footer\"]);\r\n\r\nconst dropdownClass = defineClasses([\r\n    \"dropdownClasses.rootClass\",\r\n    \"o-tpck__dropdown\",\r\n]);\r\n\r\nconst boxClasses = defineClasses([\"boxClass\", \"o-dpck__box\"]);\r\nconst boxClassBind = computed(() => getActiveClasses(boxClasses.value));\r\n\r\n// --- Expose Public Functionalities ---\r\n\r\n/** expose functionalities for programmatic usage */\r\ndefineExpose({ focus: () => pickerRef.value?.focus() });\r\n</script>\r\n\r\n<template>\r\n    <OPickerWrapper\r\n        ref=\"pickerRef\"\r\n        v-model:active=\"isActive\"\r\n        data-oruga=\"datepicker\"\r\n        :value=\"vmodel\"\r\n        :picker-props=\"props\"\r\n        :formatted-value=\"formattedValue\"\r\n        :native-type=\"!isTypeMonth ? 'date' : 'month'\"\r\n        :native-value=\"formatNative(vmodel)\"\r\n        :native-max=\"formatNative(maxDate)\"\r\n        :native-min=\"formatNative(minDate)\"\r\n        :stay-open=\"multiple\"\r\n        :dropdown-classes=\"dropdownClass\"\r\n        :root-classes=\"rootClasses\"\r\n        :box-class=\"boxClassBind\"\r\n        @change=\"onChange\"\r\n        @native-change=\"onChangeNativePicker\"\r\n        @focus=\"$emit('focus', $event)\"\r\n        @blur=\"$emit('blur', $event)\"\r\n        @invalid=\"$emit('invalid', $event)\"\r\n        @icon-click=\"$emit('icon-click', $event)\"\r\n        @icon-right-click=\"$emit('icon-right-click', $event)\">\r\n        <template v-if=\"$slots.trigger\" #trigger>\r\n            <!--\r\n                @slot Override the trigger\r\n            -->\r\n            <slot name=\"trigger\" />\r\n        </template>\r\n        <header :class=\"headerClasses\">\r\n            <!--\r\n                @slot Override the header\r\n            -->\r\n            <slot name=\"header\">\r\n                <div :class=\"headerButtonsClasses\">\r\n                    <OButton\r\n                        v-if=\"!disabled\"\r\n                        :class=\"prevButtonClasses\"\r\n                        :disabled=\"!showPrev\"\r\n                        :aria-label=\"ariaPreviousLabel\"\r\n                        :icon-pack=\"iconPack\"\r\n                        :icon-left=\"iconPrev\"\r\n                        outlined\r\n                        @click.prevent=\"prev\"\r\n                        @keydown.enter.prevent=\"prev\"\r\n                        @keydown.space.prevent=\"prev\" />\r\n\r\n                    <OButton\r\n                        v-if=\"!disabled\"\r\n                        :class=\"nextButtonClasses\"\r\n                        :disabled=\"!showNext\"\r\n                        :aria-label=\"ariaNextLabel\"\r\n                        :icon-pack=\"iconPack\"\r\n                        :icon-left=\"iconNext\"\r\n                        outlined\r\n                        @click.prevent=\"next\"\r\n                        @keydown.enter.prevent=\"next\"\r\n                        @keydown.space.prevent=\"next\" />\r\n\r\n                    <div :class=\"listsClasses\">\r\n                        <o-select\r\n                            v-if=\"!isTypeMonth\"\r\n                            v-model=\"focusedDateData.month\"\r\n                            :disabled=\"disabled\"\r\n                            :size=\"size\"\r\n                            v-bind=\"selectClasses\">\r\n                            <option\r\n                                v-for=\"month in listOfMonths\"\r\n                                :key=\"month.name\"\r\n                                :value=\"month.index\"\r\n                                :disabled=\"month.disabled\">\r\n                                {{ month.name }}\r\n                            </option>\r\n                        </o-select>\r\n                        <o-select\r\n                            v-model=\"focusedDateData.year\"\r\n                            :disabled=\"disabled\"\r\n                            :size=\"size\"\r\n                            v-bind=\"selectClasses\">\r\n                            <option\r\n                                v-for=\"year in listOfYears\"\r\n                                :key=\"year\"\r\n                                :value=\"year\">\r\n                                {{ year }}\r\n                            </option>\r\n                        </o-select>\r\n                    </div>\r\n                </div>\r\n            </slot>\r\n        </header>\r\n        <!--\r\n            @slot Override the body\r\n        -->\r\n        <slot name=\"body\">\r\n            <o-datepicker-month\r\n                v-if=\"isTypeMonth\"\r\n                v-model=\"vmodel\"\r\n                v-model:focused-date=\"focusedDateData\"\r\n                :month-names=\"computedMonthNames\"\r\n                :picker-props=\"props\"\r\n                @range-start=\"(date) => $emit('range-start', date)\"\r\n                @range-end=\"(date) => $emit('range-end', date)\" />\r\n            <o-datepicker-table\r\n                v-else\r\n                v-model=\"vmodel\"\r\n                v-model:focused-date=\"focusedDateData\"\r\n                :day-names=\"computedDayNames\"\r\n                :month-names=\"computedMonthNames\"\r\n                :picker-props=\"props\"\r\n                @range-start=\"(date) => $emit('range-start', date)\"\r\n                @range-end=\"(date) => $emit('range-end', date)\" />\r\n        </slot>\r\n        <footer v-if=\"$slots.footer\" :class=\"footerClasses\">\r\n            <!--\r\n                @slot Define an additional footer\r\n            -->\r\n            <slot name=\"footer\" />\r\n        </footer>\r\n    </OPickerWrapper>\r\n</template>\r\n"],"names":["computed","date","matchWithGroups","ref","watch","nextTick","firstWeekOffset","weeksInYear","defineClasses","_useModel","visibleDayNames","weeksInThisMonth","weekBuilder","isDefined","multipleSelectedDates","useMatchMedia","getMonthNames","getWeekdayNames","getActiveClasses"],"mappings":"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"}