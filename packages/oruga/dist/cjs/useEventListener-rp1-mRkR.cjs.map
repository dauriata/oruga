{"version":3,"file":"useEventListener-rp1-mRkR.cjs","sources":["../../src/composables/useEventListener.ts"],"sourcesContent":["import {\r\n    onBeforeUnmount,\r\n    onMounted,\r\n    type MaybeRefOrGetter,\r\n    type Component,\r\n} from \"vue\";\r\nimport { isObject } from \"@/utils/helpers\";\r\nimport { unrefElement } from \"./unrefElement\";\r\n\r\ntype EventTarget = Element | Document | Window | Component;\r\ntype EventListenerOptions = AddEventListenerOptions & {\r\n    /** Register event listener immediate or on mounted hook. */\r\n    immediate?: boolean;\r\n};\r\n\r\n/**\r\n * Register DOM events using addEventListener on mounted, and removeEventListener automatically on unmounted.\r\n * Adaption of {@link  https://vueuse.org/core/useEventListener}\r\n *\r\n * @param event event name\r\n * @param listener event listener function\r\n * @param el default docuemnt\r\n * @return stop function\r\n */\r\nexport function useEventListener(\r\n    event: string,\r\n    listener: (evt?: any) => any,\r\n    el: MaybeRefOrGetter<EventTarget> = document,\r\n    options?: EventListenerOptions,\r\n): () => void {\r\n    let cleanup: () => void;\r\n\r\n    const register = (): void => {\r\n        if (!el) return;\r\n\r\n        const target = unrefElement(el);\r\n        // create a clone of options, to avoid it being changed reactively on removal\r\n        const optionsClone = isObject(options) ? { ...options } : options;\r\n        target.addEventListener(event, listener, optionsClone);\r\n        cleanup = (): void =>\r\n            target.removeEventListener(event, listener, optionsClone);\r\n    };\r\n\r\n    const stop = (): void => {\r\n        if (typeof cleanup === \"function\") cleanup();\r\n    };\r\n\r\n    if (options?.immediate) register();\r\n    else {\r\n        onMounted(() => register());\r\n        onBeforeUnmount(() => stop());\r\n    }\r\n\r\n    return stop;\r\n}\r\n"],"names":["unrefElement","isObject","onMounted","onBeforeUnmount"],"mappings":";;;;;AAwBO,SAAS,iBACZ,OACA,UACA,KAAoC,UACpC,SACU;AACN,MAAA;AAEJ,QAAM,WAAW,MAAY;AACzB,QAAI,CAAC;AAAI;AAEH,UAAA,SAASA,0BAAa,EAAE;AAE9B,UAAM,eAAeC,QAAAA,SAAS,OAAO,IAAI,EAAE,GAAG,QAAY,IAAA;AACnD,WAAA,iBAAiB,OAAO,UAAU,YAAY;AACrD,cAAU,MACN,OAAO,oBAAoB,OAAO,UAAU,YAAY;AAAA,EAAA;AAGhE,QAAM,OAAO,MAAY;AACrB,QAAI,OAAO,YAAY;AAAoB;EAAA;AAG/C,MAAI,mCAAS;AAAoB;OAC5B;AACSC,kBAAA,MAAM,UAAU;AACVC,wBAAA,MAAM,MAAM;AAAA,EAChC;AAEO,SAAA;AACX;;"}